!function(){"use strict";function e(e,t,n){e.state("app",{url:"/app",templateUrl:"app/home/view/home.view.html",controller:"homeController",controlleerAs:"hc"}).state("login",{url:"/login",templateUrl:"app/login/view/login.view.html",controller:"loginController",controlleerAs:"lc"}).state("user",{url:"/user",templateUrl:"app/user/view/user.view.html",controller:"userController",controlleerAs:"uc"}).state("admin",{url:"/admin",templateUrl:"app/user/view/admin.view.html",controller:"userController",controlleerAs:"uc"})}var t=angular.module("movieFlixApp",["ui.router"]);t.config(e),e.$inject=["$stateProvider","$urlRouterProvider","$httpProvider"];angular.module("movieFlixApp").directive("aGreatEye",function(){return{restrict:"E",replace:!0,template:"<h1>lidless, wreathed in flame, {{1 + 1}} times</h1>"}}),angular.module("movieFlixApp").directive("paginator",["$filter","$parse",function(e,t){return{restrict:"EA",scope:!0,link:function(e,n,o,r){function i(){return d*m*h}function u(){return d*R}function s(){return angular.isDefined(e.items)&&e.items.length>0?1:0}function c(){return g[h]&&g[h][R]?g[h][R].length:0}function a(){g=[],angular.forEach(e.items,function(e,t){var n=Math.floor(t/f),o=Math.floor(t/d)-n*m;t%f===0&&(g[n]=[]),t%d===0&&(g[n][o]=[]),g[n][o].push(e)}),0===g.length?(h=0,R=0):h>g.length-1?(h=g.length-1,R=g[h].length-1):R>g[h].length-1&&(R=g[h].length-1)}function l(){return g.length>0&&R<g[h].length-1}var d=1*o.itemsPerPage,m=1*o.pagesPerGroup,f=d*m,v=e.$parent||e,p=t(o.items);e.items=p(v),e.$watch(function(){var t=p(v);return t!==e.items&&(e.items=t),[]}),e.itemsPerPage=d;var g=[],h=0,R=0;e.sorting="title",e.firstItemNumber=function(){return i()+u()+s()},e.lastItemNumber=function(){return i()+u()+c()},e.itemsCount=function(){return e.items?e.items.length:[]},e.paginatedItems=function(){return g[h]&&g[h][R]?g[h][R]:[]},e.pagesInGroup=function(){var e=[];return g[h]&&angular.forEach(g[h],function(t,n){e.push({index:m*h+n+1,active:R===n})}),e},e.$watch("items",function(e,t){angular.isDefined(e)&&a()}),e.hasNextGroup=function(){return g.length>0&&h<g.length-1},e.gotoNextGroup=function(){e.hasNextGroup&&(h++,R=0)},e.hasPrevGroup=function(){return g.length>0&&h>0},e.gotoPrevGroup=function(){e.hasPrevGroup&&(h--,R=m-1)},e.hasNextPage=function(){return g.length>0&&e.hasNextGroup()||l()},e.gotoNextPage=function(){l()?R++:e.gotoNextGroup()},e.hasPrevPage=function(){return g.length>0&&e.hasPrevGroup()||R>0},e.gotoPrevPage=function(){R>0?R--:e.gotoPrevGroup()},e.gotoPage=function(e){R=e-1-m*h}}}}])}(),function(){"use strict";function e(e,t,n,o,r,i,u){var s=e;o.isAuthenticated()||n.go("login",{}),s.movieDetailsPopup=!0,s.user=o.getUser(),s.currentItem={},s.addUpdateMovie,s.viewUser,s.movieComment,s.resetAddUpdateMovie=function(){s.addUpdateMovie={Id:"",Language:"",Runtime:"",Type:"",Country:"",Year:"",Writer:"",Poster:"",Title:"",Awards:"",Actors:"",Released:"",Director:"",Plot:"",imdbID:"",Metascore:"",Rated:"",Genre:"",imdbRating:"",imdbVotes:""}},s.setAddUpdateMovie=function(e){s.addUpdateMovie=e},s.resetViewUser=function(){s.addUpdateMovie={id:"",userName:"",userEmail:"",userAccountType:""}},s.setViewUser=function(e){s.viewUser=e},s.resetMovieComment=function(){s.movieComment={id:"",message:"",user:{},movie:{}}},s.setMovieComment=function(e){s.movieComment=e},s.searchInputs={movieSearch:"",movieId:"",userId:""},s.operations={movieOperation:"",userOperation:""},s.openMovieDetailsPopup=function(e){s.currentItem=s.findMovieById(e),document.getElementById("mySidenav").style.width="100%"},s.closeMovieDetailsPopup=function(){document.getElementById("mySidenav").style.width="0%"},s.openAddUpdateMoviePopup=function(){document.getElementById("myModal").style.width="100%"},s.closeAddUpdateMoviePopup=function(){document.getElementById("myModal").style.width="0%"},s.openViewUserPopup=function(){document.getElementById("viewUserModal").style.width="100%"},s.closeViewUserPopup=function(){document.getElementById("viewUserModal").style.width="0%"},s.sortMoviesByRating=function(){s.sortMoviesBySelection("rating")},s.sortMoviesByVotes=function(){s.sortMoviesBySelection("votes")},s.sortMoviesByYear=function(){s.sortMoviesBySelection("year")},s.doSearch=function(){s.searchInputs.movieSearch&&s.findByType(s.searchInputs.movieSearch,"name")},s.topRatedMovies=function(){s.findByType("MOVIE","ASC")},s.topRatedTv=function(){s.findByType("TV","ASC")},s.findMovieById=function(e){for(var t in s.movies)if(e===s.movies[t].id)return s.resetMovieComment(),u.getUserComments(e,s.user.userId).then(function(e){e&&(s.setMovieComment(e[0]),console.log(e))},function(e){console.error("Error while Fething movies")}),s.movies[t]},s.loadAllMovies=function(){r.getAllMovies().then(function(e){return e?void(s.movies=e):void(s.movies=[])},function(e){console.error("Error while Fething movies")})},s.getMovie=function(e){r.getMovie(e).then(function(e){e||s.resetAddUpdateMovie(),s.setAddUpdateMovie(e)},function(e){console.error("Error while Fething movie"),s.resetAddUpdateMovie()})},s.getUser=function(e){i.getUser(e).then(function(e){s.resetViewUser(),e&&s.setViewUser(e)},function(e){s.resetViewUser(),console.error("Error while Fething User")})},s.sortMoviesBySelection=function(e){r.sortBySelection(e).then(function(e){return e?void(s.movies=e):void(s.movies=[])},function(e){console.error("Error while Fething movies")})},s.findByType=function(e,t){r.findByType(e,t).then(function(e){return e?void(s.movies=e):void(s.movies=[])},function(e){console.error("Error while Fething movies")})},s.onMovieCommentBtnClick=function(){var e={message:s.movieComment.message,user:{id:s.user.userId},movie:{id:s.currentItem.id}};s.createComment(e)},s.createComment=function(e){u.createComment(e).then(function(e){return e?void console.log("Comment added succesfully "):void console.log("Failed to add comment")},function(e){console.error("Failed to add comment")})},s.onMovieAddUpdateBtnClick=function(){""===s.searchInputs.movieId?(s.resetAddUpdateMovie(),s.operations.movieOperation="ADD"):(s.getMovie(s.searchInputs.movieId),s.operations.movieOperation="UPDATE"),s.openAddUpdateMoviePopup()},s.onUserViewBtnClick=function(){s.searchInputs.userId&&(s.getUser(s.searchInputs.userId),s.openViewUserPopup())},s.onAddMovieButtonClick=function(){s.createMovie(s.addUpdateMovie)},s.onUpdateMovieButtonClick=function(){s.updateMovie(s.addUpdateMovie)},s.onDeleteMovieButtonClick=function(){s.searchInputs.movieId&&s.deleteMovie(s.searchInputs.movieId)},s.createMovie=function(e){r.createMovie(e).then(function(e){s.resetAddUpdateMovie(),e||console.log("Failed to add movie"),s.loadAllMovies(),console.log("Movie added succesfully ")},function(e){console.error("Failed to add movie"),s.resetAddUpdateMovie()}),s.closeAddUpdateMoviePopup()},s.updateMovie=function(e){r.updateMovie(e).then(function(e){s.resetAddUpdateMovie(),e||console.log("Failed to update movie"),s.loadAllMovies()},function(e){console.error("Failed to update movie"),s.resetAddUpdateMovie()}),s.closeAddUpdateMoviePopup()},s.deleteMovie=function(e){r.deleteMovie(e).then(function(e){e||console.log("Failed to delete movie"),s.loadAllMovies()},function(e){console.error("Failed to delete movie")})},s.doLogout=function(){o.setUser(null),n.go("login",{})},s.loadAllMovies()}angular.module("movieFlixApp").controller("userController",e),e.$inject=["$scope","$window","$state","authService","movieService","userService","commentService"]}(),function(){"use strict";function e(e,t,n){function o(o){return e.post(n.API_HOST+"/auth/login",o).then(function(e){return e.data},function(e){return t.reject("ERROR: "+e.statusText)})}function r(o){return e.post(n.API_HOST+"/users",o).then(function(e){return e.data},function(e){return t.reject("ERROR: "+e.statusText)})}function i(o){return e.put(n.API_HOST+"/users/"+o.id,o).then(function(e){return e.data},function(e){return t.reject("ERROR: "+e.statusText)})}function u(o){return e["delete"](n.API_HOST+"/users/"+o).then(function(e){return e.data},function(e){return t.reject("ERROR: "+e.statusText)})}function s(o){return e.get(n.API_HOST+"/users/"+o).then(function(e){return e.data},function(e){return t.reject("ERROR: "+e.statusText)})}var c=this;c.authUser=o,c.createUser=r,c.updateUser=i,c.deleteUser=u,c.getUser=s}angular.module("movieFlixApp").service("userService",e),e.$inject=["$http","$q","CONFIG"]}(),function(){"use strict";function e(e,t,n){function o(o){return e.post(n.API_HOST+"/ratings",o).then(function(e){return e.data},function(e){return t.reject("ERROR: "+e.statusText)})}function r(o){return e.put(n.API_HOST+"/ratings/"+o.id,o).then(function(e){return e.data},function(e){return t.reject("ERROR: "+e.statusText)})}function i(o){return e["delete"](n.API_HOST+"/ratings/"+o).then(function(e){return e.data},function(e){return t.reject("ERROR: "+e.statusText)})}function u(o){return e.get(n.API_HOST+"/ratings/"+o).then(function(e){return e.data},function(e){return t.reject("ERROR: "+e.statusText)})}function s(){return e.get(n.API_HOST+"/ratings").then(function(e){return e.data},function(e){return t.reject("ERROR: "+e.statusText)})}var c=this;c.createRating=o,c.updateRating=r,c.deleteRating=i,c.getRating=u,c.getAllRatings=s}angular.module("movieFlixApp").service("ratingService",e),e.$inject=["$http","$q","CONFIG"]}(),function(){"use strict";function e(e,t,n){function o(o){return e.post(n.API_HOST+"/movies",o).then(function(e){return e.data},function(e){return t.reject("ERROR: "+e.statusText)})}function r(o){return e.put(n.API_HOST+"/movies/"+o.id,o).then(function(e){return e.data},function(e){return t.reject("ERROR: "+e.statusText)})}function i(o){return e["delete"](n.API_HOST+"/movies/"+o).then(function(e){return e.data},function(e){return t.reject("ERROR: "+e.statusText)})}function u(o){return e.get(n.API_HOST+"/movies/"+o).then(function(e){return e.data},function(e){return t.reject("ERROR: "+e.statusText)})}function s(){return e.get(n.API_HOST+"/movies").then(function(e){return e.data},function(e){return t.reject("ERROR: "+e.statusText)})}function c(){return e.get(n.API_HOST+"/movies").then(function(e){return e.data},function(e){return t.reject("ERROR: "+e.statusText)})}function a(o,r){return e.get(n.API_HOST+"/movies?type="+o+"&sort="+r).then(function(e){return e.data},function(e){return t.reject("ERROR: "+e.statusText)})}function l(o){return e.get(n.API_HOST+"/movies/sortByCol?sortCol="+o).then(function(e){return e.data},function(e){return t.reject("ERROR: "+e.statusText)})}function d(o,r){return e.get(n.API_HOST+"/movies?genre="+o+"&sort="+r).then(function(e){return e.data},function(e){return t.reject("ERROR: "+e.statusText)})}function m(o,r){return e.get(n.API_HOST+"/movies?director="+o+"&sort="+r).then(function(e){return e.data},function(e){return t.reject("ERROR: "+e.statusText)})}function f(o,r){return e.get(n.API_HOST+"/movies?imdbId="+o+"&sort="+r).then(function(e){return e.data},function(e){return t.reject("ERROR: "+e.statusText)})}function v(o,r){return e.get(n.API_HOST+"/movies?year="+o+"&sort="+r).then(function(e){return e.data},function(e){return t.reject("ERROR: "+e.statusText)})}var p=this;p.createMovie=o,p.updateMovie=r,p.deleteMovie=i,p.getMovie=u,p.getAllMovies=s,p.getUserMovies=c,p.findByType=a,p.sortBySelection=l,p.findByGenre=d,p.findByDirector=m,p.findByimdbId=f,p.findByYear=v}angular.module("movieFlixApp").service("movieService",e),e.$inject=["$http","$q","CONFIG"]}(),function(){"use strict";function e(e,t,n){function o(o){return e.post(n.API_HOST+"/comments",o).then(function(e){return e.data},function(e){return t.reject("ERROR: "+e.statusText)})}function r(o){return e.put(n.API_HOST+"/comments/"+o.id,o).then(function(e){return e.data},function(e){return t.reject("ERROR: "+e.statusText)})}function i(o){return e["delete"](n.API_HOST+"/comments/"+o).then(function(e){return e.data},function(e){return t.reject("ERROR: "+e.statusText)})}function u(o){return e.get(n.API_HOST+"/comments/"+o).then(function(e){return e.data},function(e){return t.reject("ERROR: "+e.statusText)})}function s(){return e.get(n.API_HOST+"/comments").then(function(e){return e.data},function(e){return t.reject("ERROR: "+e.statusText)})}function c(o,r){return e.get(n.API_HOST+"/comments?movie="+o+"&user="+r).then(function(e){return e.data},function(e){return t.reject("ERROR: "+e.statusText)})}function a(o,r){return e.post(n.API_HOST+"/comments?movie="+o+"&user="+r).then(function(e){return e.data},function(e){return t.reject("ERROR: "+e.statusText)})}var l=this;l.createComment=o,l.updateComment=r,l.deleteComment=i,l.getComments=u,l.getAllComments=s,l.getUserComments=c,l.getOtherUserMovieComments=a}angular.module("movieFlixApp").service("commentService",e),e.$inject=["$http","$q","CONFIG"]}(),function(){"use strict";function e(){function e(e){o.user=e}function t(){return o.user}function n(){return!!o.user}var o=this;o.user=null,o.setUser=e,o.getUser=t,o.isAuthenticated=n}angular.module("movieFlixApp").service("authService",e),e.$inject=[]}(),function(){"use strict";function e(e,t,n,o,r){var i=e;i.message="Login Page",i.formCtrl={login:{username:"",password:""},signup:{username:"",password:"",email:""}},i.opentab=function(e,t){var n,o,r;for(o=document.getElementsByClassName("menu"),n=0;n<o.length;n++)o[n].style.display="none";for(r=document.getElementsByClassName("x"),n=0;n<r.length;n++)r[n].className=r[n].className.replace(" active","");document.getElementById(t).style.display="block",e.currentTarget.className+=" active"},i.doLogin=function(e){var t={userName:i.formCtrl.login.username,password:i.formCtrl.login.password};r.authUser(t).then(function(e){e&&e.token&&(o.setUser(e),"ADMIN"===e.userRole?n.go("admin",{}):n.go("user",{}))},function(e){console.error("Error while Authenticating User")})},i.doSignup=function(e){var t={userName:i.formCtrl.signup.username,password:i.formCtrl.signup.password,userEmail:i.formCtrl.signup.email,userAccountType:"USER"};r.createUser(t).then(function(e){console.log(e)},function(e){console.error("Error while Creating User")})}}angular.module("movieFlixApp").controller("loginController",e),e.$inject=["$scope","$window","$state","authService","userService"]}(),function(){"use strict";function e(e,t,n){var o=e;o.message="Home Page",o.showLoginPage=function(){n.go("login",{})}}angular.module("movieFlixApp").controller("homeController",e),e.$inject=["$scope","$window","$state"]}(),function(){"use strict";angular.module("movieFlixApp").constant("CONFIG",{API_HOST:"http://localhost:2727/movie/api"})}(),function(){"use strict";angular.module("MyApp",[]).filter("reverse",[function(){return function(e){return e.split("").reverse().join("")}}])}();